{% extends "base.html" %}

{% block css %}
    <style>
        li {
            list-style: none;
            text-indent: 10px;
        }
        li .username {
            display: inline-block;
            width: 200px;
        }
    </style>
{% endblock %}

{% block content %}
<h1>{{object}} ({{ object.pk}})</h1>
<div class="panel panel-default">
    <div class="panel-heading">Teams <a class='pull-right btn btn-xs btn-default' href="/teams/new/">Create new team</a></div>
    <form method=post class=panel-body>
        {% csrf_token %}
        {{view.teamformset.management_form}}
        {{view.userformset.management_form}}
        <table class=table>
            {% for g in view.teams %}
            <tr>
                <td><a href="/teams/{{g.pk}}/">{{g}}</a></td>
                <td>
                    {{g.form.entity}}
                    {{g.form.permission}}
                </td>
                <td>
                    <button name="rmgroup" value={{g.pk}} class='btn btn-xs btn-danger'>
                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    </button>
                </td>
            </tr>
            {% endfor %}
        </table>
        <br>
        <input type=submit value="Apply Changes">
        <input type=reset>
    </form>
    <form class="panel-footer" method=post>
        Add team: {{view.addgroupform.group}}
        {% csrf_token %}
        <input type=submit value=Add>
    </form>
</div>
<div class="panel panel-default">
    <div class="panel-heading">Collaborators</div>
    <form method=post class=panel-body>
        {% csrf_token %}
        {{view.userformset.management_form}}
        {{view.teamformset.management_form}}
        {% for t in view.trustees %}
        <li><span class="username">{{t.entity}}</span>
            {{t.form.entity}}
            {{t.form.permission}}
            <button name="rmuser" value={{t.pk}} class='btn btn-xs btn-danger'>
                <span class="glyphicon glyphicon-remove" aria-hidden="true">
                </span>
            </button>
        </li>
        {% endfor %}
        <br>
        <input type=submit value="Apply Changes">
        <input type=reset>
    </form>
    <form class=panel-footer method=post>
        Add collaborator: {{view.adduserform.user}}
        {% csrf_token %}
        <input type=submit value=Add>
    </form>
</div>
{% endblock %}
